
<div class="bg-dark border rounded sticky-top row p-2 offset-5"  *ngIf="Agreement.Agreement">
    <button (click)="SaveEntireAgreement()" (click)="addToast({title:'Agreement Saved!', msg:'Save Was Successful', timeout: 5000, theme:'bootstrap', position:'bottom-right', type:'success'})" class="btn btn-info btn-sm mb-0 align-bottom" [placement]="'bottom'" ngbTooltip="Save Agreement" type="button" class="btn btn-sm btn-success toolbar-btn ml-1"><i class="fa fa-save"></i>Save</button>
    <button (click)="addToast({title:'Whoops!', msg:'THIS WILL MAKE DATASHEET', timeout: 5000, theme:'bootstrap', position:'bottom-right', type:'info'})" class="btn btn-info btn-sm mb-0 align-bottom" [placement]="'bottom'" ngbTooltip="Datasheet" type="button" class="btn btn-sm btn-light toolbar-btn icon-btn"><i class="fa fa-table"></i></button>
    <button (click)="addToast({title:'UH OH!', msg:'THIS WILL CREATE CASE', timeout: 5000, theme:'bootstrap', position:'bottom-right', type:'warning'})" class="btn btn-info btn-sm mb-0 align-bottom" [placement]="'bottom'" ngbTooltip="Create Case" type="button" class="btn btn-sm btn-info toolbar-btn icon-btn"><i class="fa fa-user"></i></button>
    <button (click)="addToast({title:'NOPE!', msg:'THIS WILL SEND EMAIL', timeout: 5000, theme:'bootstrap', position:'bottom-right', type:'warning'})" class="btn btn-info btn-sm mb-0 align-bottom" [placement]="'bottom'" ngbTooltip="Contact" type="button" class="btn btn-sm btn-secondary toolbar-btn icon-btn"><i class="fa fa-envelope"></i></button>
    <button (click)="addToast({title:'SORRY!', msg:'THIS WILL COPY', timeout: 5000, theme:'bootstrap', position:'bottom-right', type:'warning'})" class="btn btn-info btn-sm mb-0 align-bottom" [placement]="'bottom'" ngbTooltip="Copy Agreement" type="button" class="btn btn-sm btn-warning toolbar-btn icon-btn"><i class="fa fa-copy"></i></button>
    <button (click)="deleteAgreement()" class="btn btn-info btn-sm mb-0 align-bottom" [placement]="'bottom'" ngbTooltip="Delete Agreement" type="button" class="btn btn-sm btn-danger toolbar-btn icon-btn"><i class="fa fa-trash-alt"></i></button>
    <h6 class="text-light mt-2 mr-2">Status:</h6>
    <ng-select 
        [items]="SelectOptions.AgreementStatuses"
        bindLabel="AgreementStatusDesc"
        bindValue = 'AgreementStatusCode'
        placeholder="Agreement Status"
        dropdownPosition= 'bottom'
        [(ngModel)]="Agreement.AgreementStatusCode"
        name="AgreementStatusCode"
        class="btn-sm"
        id="Agreement-Status">
    </ng-select>
</div>
<div class="card" *ngIf="Agreement.Agreement">

    <div class="card-body">
        <form>
            <div class="form-row">
                    

            </div>

        <div class="form-row m-0 p-0">
            <div class="form-group col-md-4">
                <label class="col-form-label-sm font-weight-bold pb-0">Agreement Number:</label>
                <input *ngIf="agreementExists" [(ngModel)]="Agreement.Agreement.AgreementNumber" name="AgreementNumber" type="text" class="form-control" placeholder="Agreement Number" readonly>
                <input *ngIf="!agreementExists" [(ngModel)]="Agreement.Agreement.AgreementNumber" name="AgreementNumber" type="text" class="form-control bg-white " placeholder="Agreement Number">
                
            </div>
            <div class="form-group col-md-4">
                <label for="FirstParty" class="col-form-label-sm font-weight-bold pb-0">First Party:</label>
                <input name="FirstParty" [(ngModel)]="Agreement.Agreement.FirstParty"  type="text" class="form-control bg-white" placeholder="First Party" id="FirstParty" #FirstParty required>
                <!-- <div>
                    <small class="text-danger">{{ FirstParty.className }}</small>
                </div> -->
            </div>
            <div class="form-group col-md-4">
                <label class="col-form-label-sm font-weight-bold pb-0">Second Party:</label>
                <input [(ngModel)]="Agreement.Agreement.SecondParty" name="SecondParty" type="text" class="form-control bg-white" placeholder="Second Party">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group col-md-4">
                <label class="col-form-label-sm font-weight-bold">Alt. Agreement Number:</label>
                <input [(ngModel)]="Agreement.Agreement.AltAgreementNumber" name="AltAgreementNumber" type="text" class="form-control bg-white " placeholder="Agreement Number">
            </div>
            <div class="form-group col-md-2">
                 <label class="col-form-label-sm font-weight-bold">Gross Acres:</label>
                <input [(ngModel)]="Agreement.Agreement.GrossAcres_Calc" name="GrossAcres_Calc" type="text" class="form-control" readonly>
            </div>
            <div class="form-group col-md-2">
                <label class="col-form-label-sm font-weight-bold">Agreement Date:</label>
                <input [(ngModel)]="Agreement.Agreement.AgreementDate" name="AgreementDate" type="date" class="form-control bg-white">
            </div>
            <div class="form-group col-md-2">
                <label class="col-form-label-sm font-weight-bold">Term:</label>
                <input [(ngModel)]="Agreement.Agreement.Term" name="Term" type="number" class="form-control bg-white">
            </div>
            <div class="form-group col-md-2">
                <label class="col-form-label-sm font-weight-bold">Unit:</label>
                <ng-select 
                    [items]="TermUnits"
                    bindLabel="description"
                    bindValue = "value"
                    placeholder="Select Unit"
                    dropdownPosition= 'bottom'
                    [(ngModel)]="Agreement.Agreement.TermUnit"
                    name="TermUnit"
                    class="">
                </ng-select>
            </div>
        </div>

        <div class="form-row m-0">
            <div class="form-group col-md-4">
                <label class="bmd-label-floating font-weight-bold">Agreement Type:</label>
                <ng-select 
                    [items]="SelectOptions.AgreementTypes"
                    bindLabel="AgreementTypeDesc"
                    bindValue = "AgreementTypeCode"
                    placeholder="Select Type"
                    dropdownPosition= 'bottom'
                    [(ngModel)]="Agreement.Agreement.AgreementTypeCode"
                    name="AgreementTypeCode"
                    class="">
                </ng-select>
            </div>
            <div class="form-group col-md-2">
                <label class="col-form-label-sm font-weight-bold pb-0">Reported Gross Acres:</label>
                <input [(ngModel)]="Agreement.Agreement.ReportedGrossAcres_Calc" name="ReportedGrossAcres_Calc" type="text" class="form-control" readonly>
            </div>
            <div class="form-group col-md-2">
                <label class="col-form-label-sm font-weight-bold pb-0">Effective Date:</label>
                <input [(ngModel)]="Agreement.Agreement.EffectiveDate" name="EffectiveDate" type="date" class="form-control bg-white">
            </div>
            <div class="form-group col-md-2">
                <label class="col-form-label-sm font-weight-bold pb-0">Expires:</label>
                <input [(ngModel)]="Agreement.Agreement.ExpireDate_Calc" name="ExpireDate_Calc" type="date" class="form-control" readonly>
            </div>
            <div class="form-group col-md-2">
                <label class="col-form-label-sm font-weight-bold pb-0">Drop Date:</label>
                <input [(ngModel)]="Agreement.Agreement.DropDate" name="DropDate" type="date" class="form-control bg-white" >
            </div>
        </div>

        <div class="form-row m-0">
            <div class="form-group col-md-4">
                <label class="bmd-label-floating font-weight-bold">Rights Owned:</label>
                <ng-select 
                    [items]="SelectOptions.AgreementRightsTypes"
                    bindLabel="AgreementRightsTypeDesc"
                    bindValue = "AgreementRightsTypeCode"
                    placeholder="Select Rights"
                    dropdownPosition= 'bottom'
                    [(ngModel)]="Agreement.Agreement.AgreementRightsTypeCode"
                    name="AgreementRightsTypeCode"
                    class="">
                </ng-select>
            </div>
            <div class="form-group col-md-2">
                <label class="col-form-label-sm font-weight-bold pb-0">Net Acres:</label>
                <input [(ngModel)]="Agreement.Agreement.NetAcres_Calc" name="NetAcres_Calc" type="text" class="form-control" readonly>
            </div>
            <div class="form-group col-md-2">
                <label class="col-form-label-sm font-weight-bold pb-0">Next Obligation:</label>
                <input [(ngModel)]="Agreement.Agreement.NextObligationDate" name="NextObligation" type="date" class="form-control" readonly>
            </div>
            <div class="form-group col-md-2">
                <label class="col-form-label-sm font-weight-bold pb-0">Extended Expiration:</label>
                <input [(ngModel)]="Agreement.Agreement.ExtendedExpDate" name="ExtendedExpDate" type="date" class="form-control bg-white">
            </div>
            <div class="form-group col-md-2">
                <label class="bmd-label-floating font-weight-bold">Drop Reason:</label>
                <ng-select 
                    [items]="SelectOptions.AgreementDropReasons"
                    bindLabel="DropReasonDesc"
                    bindValue = "DropReasonCode"
                    placeholder="Select Reason"
                    dropdownPosition= 'bottom'
                    [(ngModel)]="Agreement.Agreement.DropReasonCode"
                    name="DropReasonCode"
                    class="">
                </ng-select>
            </div>
        </div>

        <div class="form-row m-0">
            <div class="form-group col-md-4">
                <label class="bmd-label-floating font-weight-bold">Agreement Form Group:</label>
                <ng-select 
                    [items]="SelectOptions.AgreementGroupForms"
                    bindLabel="AgreementGroupFormDesc"
                    bindValue ="AgreementGroupFormCode"
                    placeholder="Select Group"
                    dropdownPosition= 'bottom'
                    [(ngModel)]="Agreement.Agreement.AgreementGroupFormCode"
                    name="AgreementGroupFormCode"
                    class="">
                </ng-select>
            </div>
            <div class="form-group col-md-2">
                <label class="col-form-label-sm font-weight-bold pb-0">Group Acres:</label>
                <input [(ngModel)]="Agreement.Agreement.GroupAcres_Calc" name="GroupAcres_Calc" type="text" class="form-control" readonly>
            </div>
            <div class="form-group col-md-2">
                <label class="col-form-label-sm font-weight-bold pb-0">First Assn Delivered:</label>
                <input [(ngModel)]="Agreement.Agreement.AssnDeliveredDate" name="AssnDeliveredDate" type="date" class="form-control bg-white">
            </div>
            <div class="form-group col-md-4">
                <label class="col-form-label-sm font-weight-bold pb-0">First Assn Received Notes:</label>
                <textarea [(ngModel)]="Agreement.Agreement.AssnReceivedComment" name="AssnReceivedComment" type="text" placeholder="Notes" class="form-control bg-white"></textarea>
            </div>
        </div>

        <div class="form-row m-0">
            <div class="form-group col-md-4">
                <label for="AgreementClassCode" class="font-weight-bold">Agreement Class:</label>
                  <ng-select 
                    [items]="SelectOptions.AgreementClassTypes"
                    bindLabel="AgreementClassDesc"
                    bindValue = 'AgreementClassCode'
                    placeholder="Select Agreement Class"
                    dropdownPosition= 'bottom'
                    [(ngModel)]="Agreement.Agreement.AgreementClassCode"
                    name="AgreementClassCode"
                    class=""
                    id="AgreementClassCode"
                    disabled>
                </ng-select>                
            </div>
            <div class="form-group col-md-1">
                <label class="col-form-label-sm font-weight-bold pb-0">Co Acres:</label>
                <input [(ngModel)]="Agreement.Agreement.CompanyAcres_Calc" name="CompanyAcres_Calc" type="text" class="form-control" readonly>
            </div>
            <div class="form-group col-md-1">
                <label class="col-form-label-sm font-weight-bold pb-0">Co NRIA:</label>
                <input [(ngModel)]="Agreement.Agreement.CompanyNRIAcres_Calc" name="CompanyNRIAcres_Calc" type="text" class="form-control" readonly>
            </div>
                <div class="form-group col-md-2">
                <label class="col-form-label-sm font-weight-bold pb-0">First Assn Delivered:</label>
                <input [(ngModel)]="Agreement.Agreement.AssnDeliveredDate" name="AssnDeliveredDate" type="date" class="form-control bg-white">
            </div>
            <div class="form-group col-md-4">
                <label class="col-form-label-sm font-weight-bold pb-0">First Assn Delivered Notes:</label>
                <textarea [(ngModel)]="Agreement.Agreement.AssnDeliveredComment" name="AssnDeliveredComments" type="text" placeholder="Notes" class="form-control shadow-sm bg-white"></textarea>
            </div>
        </div>
    
        <div class="form-row m-0">
            <div class="form-group col-md-12">
                <label class="col-form-label-sm font-weight-bold pb-0">Legal Description:</label>
                <textarea [(ngModel)]="Agreement.Agreement.AgreementLegal" name="AgreementLegal" class="form-control bg-white" rows="3"></textarea>
            </div>
        </div>
        </form>
    </div>
</div>

<!-- AGREEMENT TABS -->
<div class="card" *ngIf="Agreement.Agreement && Agreement.AgreementTracts && Agreement.AgreementComments && Agreement.AgreementRelatedParties && Agreement.AgreementProvisions">
    <div class="card-body">
        <div class="row nav-justified">
            <div class="col-12">
                <ngb-tabset type="pills">
                    <ngb-tab class="mb-3">
                        <ng-template ngbTabTitle>TRACTS<span class="badge badge-light ml-2">{{ Agreement.AgreementTracts.length }}</span></ng-template>
                        <ng-template ngbTabContent>
                            <app-tracts
                                [Agreement]="Agreement.Agreement"
                                [(AgreementTracts)]="Agreement.AgreementTracts"
                                >
                            </app-tracts>
                        </ng-template>
                    </ngb-tab>

                    <ngb-tab>
                        <ng-template ngbTabTitle>PROVISIONS<span class="badge badge-light ml-2">{{ Agreement.AgreementProvisions.length }}</span></ng-template>
                        <ng-template ngbTabContent>
                            <app-provisions
                                [Agreement]="Agreement.Agreement"
                                [Provisions]=Agreement.AgreementProvisions>
                            </app-provisions>
                        </ng-template>
                    </ngb-tab>

                    <ngb-tab>
                        <ng-template ngbTabTitle>CROSS REFERENCES<span class="badge badge-light ml-2"></span></ng-template>
                        <ng-template ngbTabContent>
                            <app-x-refs 
                                [ID]=AgreementId>
                            </app-x-refs>
                        </ng-template>
                    </ngb-tab>

                    <ngb-tab>
                        <ng-template ngbTabTitle>RELATED PARTIES<span class="badge badge-light ml-2">{{ Agreement.AgreementRelatedParties.length }}</span></ng-template>
                        <ng-template ngbTabContent>
                            <app-related-parties 
                                [ID]=AgreementId>
                            </app-related-parties>
                        </ng-template>
                    </ngb-tab>

                    <ngb-tab>
                        <ng-template ngbTabTitle>AQUISITIONS<span class="badge badge-light ml-2"></span></ng-template>
                        <ng-template ngbTabContent>
                            <app-aquisitions 
                                [ID]=AgreementId>
                            </app-aquisitions>
                        </ng-template>
                    </ngb-tab>

                    <ngb-tab>
                        <ng-template ngbTabTitle>IMAGES<span class="badge badge-light ml-2"></span></ng-template>
                        <ng-template ngbTabContent>
                            <app-files-upload 
                                [ID]=AgreementId>
                            </app-files-upload>
                        </ng-template>
                    </ngb-tab>

                    <ngb-tab>
                        <ng-template ngbTabTitle>COMMENTS<span class="badge badge-light ml-2">{{ Agreement.AgreementComments.length }}</span>
                        </ng-template>
                        <ng-template ngbTabContent>
                            <app-comments [ModuleObject]="Agreement.Agreement" [ModuleComments]="Agreement.AgreementComments">
                            </app-comments>
                        </ng-template>
                    </ngb-tab>

                </ngb-tabset>
            </div>
        </div>
    </div>
</div>
<ng2-toasty [position]="position"></ng2-toasty>